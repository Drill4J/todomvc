# Sample Application - билд 0.1.0
Этот репозиторий создан с целью быстрого разворачивания основных сервисов Drill4J (Backend, Test2Code plugin, Frontend) и JS-агента (а вернее middleware-сервиса, в рамках которого выполняются JS-агенты)

## Необходимые файлы 
Скопировать (в одну и ту же папку) следующие файлы:
- [docker-compose.yml](/docker-compose.yml)
- [docker-compose.services.yml](/docker-compose.services.yml)
- [.env](/.env)

## Шаг 1 - Запуск сервисов Drill4J
1. Выполнить `docker-compose -f docker-compose.services.yml up -d`
2. Выполнить `docker ps` и убедиться, что сервисы запущены (должно быть 4 сервиса - drill-admin, admin ui, jsagent, mongo)

*Подсказка*:
Логи можно смотреть с помощью `docker logs CONTAINER_ID` (где CONTAINER_ID - первое значение в строке из таблицы `docker ps`)

## Шаг 2 - Отправка информации по разным билдам
1. Для запуска разных версией необходимо в файле `.env` установить значение переменной `SAMPLE_APP_VERSION` нужное значение (`0.1.0`, `0.2.0`, `0.3.0`, etc...)
2. Список билдов с описанием изменений см. ниже
3. Запуск билда (отправка информации в Drill4J + хост приложения **ВСТАВИТЬ ССЫЛКУ**) 
- выполнить `docker-compose pull && docker-compose up`

## Шаг 3 - Очистка данных
При необходимости получить "чистые" Drill4J сервисы без данных:
1. выполнить `docker-compose -f docker-compose.services.yml down`
2. выполнить `docker system prune --volumes`

## Список билдов с изменениями
| Версия билда | Изменения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Название ветки                     |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
| 0.1.0        | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 0.1.0                              |
| 0.2.0        | Добавлен метод addTimestamp<br>Запуск: клик на большую кнопку c надписью "NEW METHOD (ADDTIMESTAMP)"<br>Поведение: появляется новый элемент со значением текущего времени в Unix time                                                                                                                                                                                                                                                                                                                                 | 0.2.0/new-method                   |
| 0.3.0        | Удален метод addTimestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 0.3.0/deleted-method               |
| 0.4.0        | Изменен метод addTodo<br>Запуск: вызывается добавлением нового элемента<br>Поведение: к названию элемента в конце добавляется слово "modified"                                                                                                                                                                                                                                                                                                                                                                        | 0.4.0/modified-method              |
| 0.5.0        | Удален метод markAll<br> - запуск: ранее вызывался нажатием на кнопку слева от input с надписью "What needs to be done?"<br> - поведение: отмечал все элементы как выполненные  <br><br>Изменен метод editTodo<br> - запуск: двойной клик на текст элемента списка<br> - поведение: к тексту элемента добавляется текст "Modified Edit"  <br><br>Добавлен (снова) метод addTimestamp<br> - запуск: нажатие на большую кнопку с надписью "NEW METHOD (ADDTIMESTAMP)"<br> - поведение: появляется новый элемент со значением текущего времени в Unix time | 0.5.0/new-modified-deleted-methods |

## Назначение переменных в .env
| Параметр                 | Пример значения           | Описание                                                                                                          |
|--------------------------|---------------------------|-------------------------------------------------------------------------------------------------------------------|
| BACK_VERSION             | 0.6.0                     | Версия бекенда Drill4J                                                                                            |
| TEST2CODE_PLUGIN_VERSION | 0.6.0                     | Версия Test2Code плагина Drill4J                                                                                  |
| FRONT_VERSION            | 0.6.0                     | Версия Admin UI                                                                                                   |
| JS_AGENT_VERSION         | 0.1.0-6                   | Версия JS-агента                                                                                                  |
|                          |                           |                                                                                                                   |
| JS_AGENT_HOST            | host.docker.internal:9404 | Хост:порт на котором запущен JS-агент                                                                             |
| JS_AST_PARSER_VERSION    | 0.3.5                     | Версия js-ast-parser - утилиты, которой выполняется анализ кода проекта                                           |
| SAMPLE_APP_VERSION       | 0.1.0                     | Версия тестового приложения (его код находится в этом же репозитории, названия веток 0.X.0 соответствуют версиям) |
|                          |                           |                                                                                                                   |
| SAMPLE_APP_PORT       | 8080                     | Порт тестового приложения (например, приложение будет доступно на http://localhost:8080)  |
|                          |                           |                                                                                                                   |
